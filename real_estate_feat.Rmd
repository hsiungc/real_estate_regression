---
title: "What Makes a Product Successful?"
subtitle: "Real Estate & Luxury Features"
output: pdf_document
header-includes:
 \usepackage{float}
 \usepackage{placeins}
 \floatplacement{figure}{H}
---




```{r setup, include=FALSE}
library(knitr)
  opts_chunk$set(fig.path='figure/graphics-', 
                 cache.path='cache/graphics-', 
                 fig.align='center',
                 external=TRUE,
                 echo=TRUE,
                 warning=FALSE,
                 fig.pos='H'
                )
  a4width<- 8.3
  a4height<- 11.7
```

```{r load_data, include=FALSE, echo=FALSE}
require("tidytuesdayR")
library(data.table)
library(dplyr)
library(ggplot2)
library(tidyr)
library(tidyverse)
library(stargazer)
library(car)
library(kableExtra)
set.seed(90210)
df_re <- data.table(fread('./data/marketing_sample_for_trulia_com-real_estate__20190901_20191031__30k_data.csv'))

```

\definecolor{shadecolor}{RGB}{248,248,248} 

# Introduction

iBuying is the recent phenomenon that describes the use of data and algorithms by real estate companies to buy and sell properties at mass scale. The controversial iBuying industry was all the rage until real estate giant Zillow shed its iBuying division, Offers, losing hundreds of millions of dollars in the process. In light of this, an analysis to study how different property features might impact residential property prices is performed.

The purpose of this study is to examine the key statistical factors affecting real-estate list prices. More specifically, the analysis focuses on how intrinsic features and luxury add-ons affect list prices of U.S.-based properties on the online real estate marketplace, Trulia. Intrinsic features are defined as core property features including land and dwelling dimensions, as well as the number of bedrooms and bathrooms, while luxury add-ons refer to less common but desirable amenities such as pools, fireplaces, great views, etc. The goal is to evaluate the effects of these features on list price in order to inform investors of features that have the most economically significant impact on price. This information would be beneficial in assessing whether properties are over or undervalued as well as providing insight to determine whether the addition of specific features provides the potential to generate excess profit by renovating properties to include those features.

# Research Question & Methodology

The study is aims to provide insights surrounding the following descriptive research question:

> ***Do U.S.-based real estate properties with specific intrinsic and luxury features command a listing price premium?***

To examine these features, a Trulia property listing dataset encompassing all listings available on the site during September - October 2019 is utilized. The dataset was generated by in-house web scraping tools at DataStock, crawling the Trulia.com domain over the aforementioned time frame and capturing all available listing fields consisting of 30k records and 68 features. The features are meaningfully named and correspond directly to fields listed on the Trulia website which allows for good interpretation. Additionally, the inclusion of the URL field links the actual HTML web listing at Trulia.com, allowing for the inspection of specific properties to gain a better understanding of the dataset despite not having an associated reference data descriptions.

The methodology is sequenced as follows: data sanitization, partitioning and feature extraction, exploratory analysis, feature engineering, model building & tuning, summary analysis and validation of out-of-sample results. 

The research is descriptive in nature, and since the aim is to inform investors with actionable insights, models will be estimated via linear regression. This will limit the transformations and feature engineering to variables that are meaningful, with a preference for parsimonious formulations to maximize interpretability and model robustness. Fixed geographical effects will be controlled for as they have a direct effect of housing prices[^1]. The theoretical model formulation is of the form:

$$\text{list price} = \beta_{1}\cdot\text{intrinsic}_{1} + \beta_{2}\cdot\text{intrinsic}_{2} + ... + \beta_{k-1}\cdot\text{luxury}_{k-1} + \beta_{k}\cdot\text{luxury}_{k} + \mathbf{\beta\cdot Geo}$$

[^1]: The impact of location on housing prices https://www.researchgate.net/publication/230819406_The_impact_of_location_on_housing_prices_applying_the_Artificial_Neural_Network_Model_as_an_analytical_tool

# Data Sanitization

To ensure that the clean dataset is free from errors, variables irrelevant to the research question (ex. Agent Contact, Image) are removed, and potentially relevant variables are verified to determine the minimum viable information set to accept as a valid record. The unprocessed dataset contains all fields encoded as strings in human format (comma separated numerics, variable units within fields). As such, numeric variables are converted to their corresponding data-types, and area-related variables reported in variable units (sqr.ft, acres) are standardized into common units.

Transformations and Cook's Distance measures identify outlying data points which are then manually investigated for potentially erroneous data. 

A cluster of 12 abnormally low-priced homes is identified as belonging to a group of abandoned homes in Detroit City, MI, sold through Detroit's redevelopment program. In the $Features$ field they include the warning: *"PUBLIC NOTICE PROPERTY OWNED BY THE DETROIT LAND BANK AUTHORITY IS NOT OPEN TO THE PUBLIC."* These properties were listed for auction at \$1,000 each, and are therefore removed from the dataset.

Three additional observations are removed, one with an abnormally large square footage (435000) and two with unusually large lot sizes (> 380000000). These values are confirmed to be invalid by examining their listings on Trulia - the records on the website do not correspond to the large dimensions in the observations. (Uniq_Id:  *#330fe3d034759b9b61a45d0de5e24395, #f57ef5ceb6968e5f508afcd9c452a6e0, #67b9f31ca3449b9f9399bcb8780ee593*). 

The resulting wrangling produced a high fidelity dataset in preparation for subsequent modeling and analysis.

```{r pre_process_data, echo=FALSE, message=FALSE, warning=FALSE}
names(df_re) <- gsub(" ", "_", names(df_re))
df_re[, Price := as.numeric(gsub(",|\\$", "", Price)) ]
df_re[, Sqr_Ft := as.numeric(gsub(",| sqft", "", Sqr_Ft)) ]
df_re[, Lot_Size := ifelse(grepl("acre", df_re$Lot_Size, fixed=TRUE), 43560*as.numeric(gsub(",| acre.", "", df_re$Lot_Size)), ifelse(grepl("sqft", df_re$Lot_Size, fixed=TRUE), as.numeric(gsub(",| sqft", "", df_re$Lot_Size)), NA)) ]
df_re[, Beds := as.numeric(Beds) ]
df_re[, Bath := as.numeric(Bath) ]
df_re[, Year_Built := as.numeric(Year_Built) ]
df_re[, Price_Sqr_Ft := as.numeric(gsub("\\$|\\/sqft", "", Price_Sqr_Ft)) ]
# Last_Sold_Year :=
df_re[, Last_Sold_For := as.numeric(gsub(",|\\$", "", Last_Sold_For)) ]
# City
# State
# Zipcode
# Property_Type
# Days_On_Trulia
# Extracted luxury features
df_re[, has_pool := as.integer(grepl("Pool", df_re$Features, fixed=TRUE))]
df_re[, has_great_views := as.integer(grepl("Great Views", df_re$Features, fixed=TRUE))]
df_re[, has_fireplace := as.integer(grepl("Fireplace", df_re$Features, fixed=TRUE))]
df_re[, has_great_views := as.integer(grepl("Great Views", df_re$Features, fixed=TRUE))]
df_re[, is_cable_ready := as.integer(grepl("Cable Ready", df_re$Features, fixed=TRUE))]
df_re[, is_luxury := as.integer(grepl("Luxury", df_re$Features, fixed=TRUE))]
df_re[, has_patio := as.integer(grepl("Patio", df_re$Features, fixed=TRUE))]
df_re[, has_deck := as.integer(grepl("Deck", df_re$Features, fixed=TRUE))]
df_re[, has_security_system := as.integer(grepl("Security System", df_re$Features, fixed=TRUE))]
```
```{r}
```

```{r data_validation, echo=FALSE, message=FALSE, warning=FALSE}
df_re <- df_re[!is.na(Price),]
df_re[, listing_type := sapply(strsplit(df_re$Feature, " \\|"), `[`, 1) ]
```


```{r histogram_plots, echo=FALSE, message=FALSE, warning=FALSE}
ggplot(gather(df_re[, list(Price, Sqr_Ft, Lot_Size, Beds, Bath, Year_Built, Price_Sqr_Ft, Last_Sold_Year, Zipcode)]), aes(value)) +
    geom_histogram(bins = 15) +
    facet_wrap(~key, scales = 'free_x')
```

Upon completion of sanitizing, the data is randomly partitioned into training (60%) and validation (40%) sets. This allows a high degree of expressiveness during the model ideation phase and preserves unseen data that tests how well the model generalizes.

# Exploratory Data Analysis

A key variable identified during the exploratory process is the type of property being sold, which is embedded in the $Features$ description. 

Example $Features$ field:

> _Single Family Home | $140/sqft | Lot Size: 7,877 sqft | Built in 1954 | 126 Days on Trulia | 9 Rooms | Heating: Forced Air | Heating Fuel: Gas | Cooling System: Central | Air Conditioning | Dishwasher | Disposal | Floors: Carpet, Hardwood, Laminate, Tile | Fireplace | Double Paned Windows | Ceiling Fan | Attic | Security System | Cable Ready | Stories: 1 | Exterior: Brick Wood | Foundation Type: Piers | Roof: Composition | Year Updated: 1954 | Porch | Lawn | MLS/Source ID: 14091587_

The feature is extracted into its own variable called $Listing Type$. The listing type delineates fundamentally different properties; for example, condominiums and apartments do not have a lot size property, whereas land size affects freehold property values. Additionally, measuring the number of bedrooms and bathrooms in a multi-family property would not be equivalent to a single-family property. Correspondingly the intrinsic features vary notably by listing type (Table 1). To reduce the complexity of the study (which would require interaction terms between the property type and intrinsic features), and to align the research most closely with properties targeted by investors[^2], the scope of the analysis is focused on listings of type $\text{Single Family Home}$. Given that listings of type $\text{Single Family Home}$ account for 62% of the data, the sample is of sufficient size to conduct the study. 

```{r data_by_listing_type, echo=FALSE}
df_re[, list(n=.N, mean_price_per_sqr_ft=as.integer(mean(Sqr_Ft, na.rm=T))), by=list(listing_type)][order(-n),] %>%
  kbl(caption = "Sample Size by Listing Type") %>%
  kable_classic(full_width = F, html_font = "Cambria") %>% kable_styling(font_size=10)
```

\

```{r subselect_data, echo=FALSE}
df_re <- df_re[listing_type == 'Single Family Home', ]
```

Related to the property's location, the dataset contains the zip codes associated with each listing. Existing literature[^1] shows that housing prices can vary substantially based on location. This effect is confirmed to also be present in the sample as wide differences are observed in the mean house price between different zip codes, with zip codes accounting for 27% of the variation in price (Table 2).

```{r one_way_anova_price_zipcode, echo=FALSE}
# df_re[, list(price_mean=mean(Price), price_stdev=sd(Price), price_freq=(length(Price))), by=list(Zipcode)]
anova(lm(Price ~ as.factor(Zipcode), data=df_re)) %>%
  kbl(caption = "One-way Anova Price by Zipcode") %>%
  kable_classic(full_width = F, html_font = "Cambria")
```

\

Therefore $Zipcode$ is encoded as a categorical control variable for the models. However, given the high number of unique zip codes in the dataset (2,233), coupled with the fact that some zip codes contain a low number of properties (<2) the research is limited to properties within zip codes containing more than ten listings. This will exclude zip codes not well represented in the dataset, with control coefficients that would have suffered from high variance. The consequence is considered - that the model would not be able to predict property prices for zip codes outside the ones selected. However, the selected zip codes offer broad coverage of major U.S. cities.  It is expected that a model of increased robustness is produced for the given zip codes, and ultimately lead to more accurate estimates out-of-sample within these high-density zip codes.

```{r restrict_to_main_zipcodes, echo=FALSE}
num_properties_in_zipcode <- df_re[, list(num_prop_in_zip=.N), by=list(Zipcode)]
df_re <- merge(df_re, num_properties_in_zipcode, by="Zipcode")
df_re <- df_re[num_prop_in_zip>=10,]
```


[^2]: How and Why U.S. Single-Family Housing Became an Investor Asset Class https://journals.sagepub.com/doi/pdf/10.1177/00961442211029601


```{r partition_data, echo=FALSE}
train_rows <- sample(1:nrow(df_re), 0.6*nrow(df_re))
validation_rows <- seq(1,nrow(df_re))[!seq(1,nrow(df_re)) %in% train_rows]

df_train <- df_re[train_rows, ]
num_samples_by_zipcode <- df_train[, list(num_obs=.N), by=list(Zipcode)]

df_validation <- df_re[validation_rows, ]
```



The bivariate distributions between key intrinsic variables $Sqr\_Ft$, $Lot\_Size$ and the target variable $Price$ are examined. The variables are highly skewed and do not provide uniform resolution across their range. Therefore a log transformation is suitable, and a sensible interpretation of the variables is preserved (percent change in Price, percent change in Square Footage, percent change in Lot Size).


```{r prune bad data, echo=FALSE}
df_train_preprocessing <- df_train
# remove one property which has its Sqr Ft incorrectly listed as 435000 Sqr_Ft
df_train <- df_train[Sqr_Ft <= 1e+05,]
# remove two properties which have incorrect Lot Size listed as > 380932200. Verifying these homes through the Trulia.com URL shows that these are neighbourhood homes on much smaller lots
df_train <- df_train[Lot_Size <= 1e+08,]
# remove the cluster of 12 Detroit properties being listed as auction properties for $1,000
df_train <- df_train[log(Price) > min(log(df_train$Price)),]
```


```{r untransformed_price_size_plots, echo=FALSE, , fig.height=6, fig.cap="Intrinsic Variables Pre and Post-Transormation"}

par(mfrow = c(3, 2))

plot(df_train_preprocessing$Sqr_Ft, df_train_preprocessing$Price, cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Untransformed', xlab='Sqr Ft',
        ylab='Price ($)')
abline(lm(Price ~ Sqr_Ft, data=df_train_preprocessing), col='red')

plot(df_train_preprocessing$Lot_Size, df_train_preprocessing$Price, cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Untransformed', xlab='Lot Size',
        ylab='Price ($)')
abline(lm(Price ~ Lot_Size, data=df_train_preprocessing), col='red')

plot(log(df_train_preprocessing$Sqr_Ft), log(df_train_preprocessing$Price), cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Log-Log Transformed', xlab='Sqr Ft',
        ylab='Price ($)')
abline(lm(log(Price) ~ log(Sqr_Ft), data=df_train_preprocessing), col='red')

plot(log(df_train_preprocessing$Lot_Size), log(df_train_preprocessing$Price), cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Log-Log Transformed', xlab='Lot Size',
        ylab='Price ($)')
abline(lm(log(Price) ~ log(Lot_Size), data=df_train_preprocessing), col='red')

plot(log(df_train$Sqr_Ft), log(df_train$Price), cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Log-Log Transformed & Outlier Correction', xlab='Sqr Ft', ylab='Price ($)')
abline(lm(log(Price) ~ log(Sqr_Ft), data=df_train), col='red')

plot(log(df_train$Lot_Size), log(df_train$Price), cex.lab=0.8, cex.axis=0.8, cex.main=0.8, cex.sub=0.8, main='Log-Log Transformed & Outlier Correction', xlab='Lot Size', ylab='Price ($)')
abline(lm(log(Price) ~ log(Lot_Size), data=df_train), col='red')
```


In addition to the intrinsic features, each property contains a description field $Features$ which provides many embedded characteristics pertaining to the property. By examination, a list of luxury features is identified, namely: Pool, Great Views, Fireplace, Cable Ready, Luxury Listing, Patio, Deck, and Security System.


# Model Building

The model containing only the crucial intrinsic features, such as the land area $Lot\_Size$ and the dwelling area $Sqr\_Ft$ is considered as the base model, controlling for Zip Code fixed-effects:

```{r transformed_base_model_candidate_1, warning=FALSE, echo=FALSE, results='asis', fig.cap="Base Intrinsic Model"}
base_model <- lm(log(Price) ~ log(Lot_Size) + log(Sqr_Ft) + as.factor(Zipcode), data=df_train)
stargazer(base_model, type='latex', header=FALSE, star.cutoffs = c(0.05, 0.01, 0.001), omit = c("Zipcode"), omit.labels = c("Zipcode"))
```


\FloatBarrier

The core predictors $Lot\_Size$ and $Sqr\_Ft$ are strong predictors of price. Both predictors are statistically significant and meaningful in effect size, with the model $R^2$ above 0.85. The model with all intrinsic features included is next considered by adding predictors for the number of bedrooms $Beds$ and number of bathrooms $Bath$.  

```{r superbasic_models, warning=FALSE, echo=FALSE, results='asis', fig.cap="Base  + Full Intrinsic Model"}
#base_model_A <- lm(log(Price) ~ log(Lot_Size) + log(Sqr_Ft), data=df_train)
#base_model_B <- lm(log(Price) ~ as.factor(Zipcode), data=df_train)
#stargazer(base_model_A, base_model_B, type='latex', header=FALSE, star.cutoffs = c(0.05, 0.01, 0.001), omit = c("Zipcode"), omit.labels = c("Zipcode"))
```

```{r transformed_base_model_candidate_2, warning=FALSE, echo=FALSE, results='asis', fig.cap="Base  + Full Intrinsic Model"}
base_model_all_instrinsic <- lm(log(Price) ~ log(Lot_Size) + log(Sqr_Ft) + Beds + Bath + as.factor(Zipcode), data=df_train)
stargazer(base_model, base_model_all_instrinsic, type='latex', header=FALSE, star.cutoffs = c(0.05, 0.01, 0.001), omit = c("Zipcode"), omit.labels = c("Zipcode"))
```


\FloatBarrier

While both $Bath$ and $Beds$ variables are statistically significant, the negative coefficient on $Beds$ raises some questions since it is expected that an increase in *both* the number of bedrooms and bathrooms would have a positive effect in price. This leads to investigating potential multicollinearity issues between these variables.

# Multi-collinearity Examination

As can be seen in Figure 2, there is evidence of possible multicollinearity between the $Beds$ and $Bath$ variables.

```{r beds_bath_collinearity, echo=FALSE, fig.height=4,  fig.cap="Beds vs. Baths Scatterplot"}
plot(df_train$Beds, df_train$Bath)
```

The existence of multicollinearity is further assessed via the *Variance Inflation Factor*:

```{r check multicollinearity, echo=TRUE}
car::vif(base_model_all_instrinsic)
```

# Feature Engineering

The results from the *Variance Inflation Factor* do not indicate problematically high levels of multicollinearity in the predictors. Nevertheless, since some multicolinearity is present, coupled with the desire to have model coefficients of intuitive sign for explanatory interpretability, a new variable $Excess\_Bath = Bath - Beds$ is constructed. The creation of this variable is inspired by surveys of real estate domain related literature[^4] where it is noted that homes with high ratios of bathrooms to bedrooms (above 1:1) are high-priced. The impact, if any, should be examined as it pertains to price and having an excess number of bathrooms relative to bedrooms. Thus the intrinsic model with the $Excess\_Bath$ predictor is considered.

The $Excess\_Bath$ variable is spanned by $Beds$ and $Bath$ by definition. Therefore the $Bath$ variable is replaced by the inclusion of $Excess\_Bath$. As a consequence the $R^2$ is unaffected, but the interpretation of the model is improved.

[^4]: Wealthy home buyers demand bathrooms; lots of bathrooms https://www.latimes.com/home/la-xpm-2012-mar-02-la-fi-many-bathrooms-20120303-story.html

```{r feature engineering, echo=TRUE}
df_train[, excess_bath := Bath - Beds ]
```

```{r transformed_base_model_candidate_3, warning=FALSE, echo=FALSE, results='asis', fig.cap="Base  + Full Intrinsic Model"}
base_model_all_instrinsic_excess <- lm(log(Price) ~ log(Lot_Size) + log(Sqr_Ft) + Beds + excess_bath + as.factor(Zipcode), data=df_train)
stargazer(base_model, base_model_all_instrinsic, base_model_all_instrinsic_excess, type='latex', header=FALSE, star.cutoffs = c(0.05, 0.01, 0.001), omit = c("Zipcode"), omit.labels = c("Zipcode"))
```

It is noted with this formulation that the coefficients on both $Beds$ and $Excess\_Bath$ are positive and the model is no less powerful at explaining $Price$. Moreover this formulation presents a more intuitive explanatory model of housing list prices: the number of bedrooms in a property has a positive (and statistically significant) impact on $Price$; also the number of bathrooms in excess of the number of bedrooms has a positive (and statistically significant) impact on price. Conversely, a deficit in the number of bathrooms relative to the number of bedrooms has a negative impact on price.

# Extending the Model to Include Luxury Features

In addition to the core intrinsic features, the effect luxury features have on property prices should be explored. As described in the *Data* section, the following features are extracted as categorical variables and included to form an advanced model: luxury listing, having a pool, having a fireplace, having great views, being cable ready, having a patio, having a deck or having a security system.

```{r transformed_advanced_model, warning=FALSE, echo=FALSE, results='asis', fig.cap="Base  + Full Intrinsic Model"}
model_adv <- lm(log(Price) ~ log(Lot_Size) + log(Sqr_Ft) + Beds
                + excess_bath  + is_luxury + has_pool
                + has_fireplace + has_great_views + is_cable_ready
                + has_patio + has_deck + has_security_system
                + as.factor(Zipcode), data=df_train)
stargazer(base_model_all_instrinsic_excess, model_adv, type='latex', header=FALSE, star.cutoffs = c(0.05, 0.01, 0.001), omit = c("Zipcode"), omit.labels = c("Zipcode"))
```

\FloatBarrier

An F-test is conducted to evaluate the significance of the advanced feature model's ability to explain the variance in $Price$ relative to the base intrinsic feature model. It is observed that "is_luxury" ,"has_pool", "has_great_views", and "has_patio" are statistically significant, whereas "is_cable_ready" and "has_security_system" are not.


```{r f-test for base model vs optimized model, echo=F}
anova(base_model_all_instrinsic_excess, model_adv, test = 'F')
```

\FloatBarrier

While the F-test result is significant with a p-value < 0.001, it is noted that the magnitude of the regression coefficients on the luxury features is not practically meaningful in % \$USD dollar terms, especially relative to the magnitude of the other variables. Therefore using these additional luxury features in the model would not give an informative indication of whether a property is over or undervalued, and the inclusion of the luxury variables made the model less parsimonious.

# Linear Model Assumptions

```{r verify model assumptions, warning=FALSE, echo=F}
par(mfrow=c(2,2))
plot(model_adv)
```

\FloatBarrier

It is verified via visual inspection that the Residuals vs. Fitted plot (check for linearity) has a horizontal trend and is mostly uniform. The Q-Q plot did display some deviations in the tails from normality - this is noted as due to a subset of properties having very large or small extreme listing price, therefore even under the log transformation the tails are heavier than normal. The Scale-Location plot, which checks for homoskedasticity (or constant variance), is reasonably behaved. Finally the Residuals vs. Leverage plot did not identify any points outside Cook's Distance criterion biasing the estimated coefficients due to high leverage.

Also, given the description of the data generating process the data is assumed as independent and identically distributed.

# Model Validation

In order to validate how well the model performs on unseen data, and therefore how it generalizes to the population, the root mean-squared error produced by the model on the training data is measured, before being compared to the root mean-squared prediction error produced by running the same model with coefficients estimated on the training data using the validation data as input.

The choice of MSE vs. other possible measures (such as MAE) is informed by the decision to have greater sensitivity to occasional large errors, as handled by the square functional form.

```{r calculate model performance out-of-sample, echo=F}
model_adv_summary <- summary(model_adv)
sprintf("RMSE = %f", sqrt(mean(model_adv_summary$residuals^2)))
# apply the same sanitization steps for erroneous data as on the training set
# exclude properties where square footage is not sane
df_validation <- df_validation[Sqr_Ft <= 1e+05,]
# exclude properties where lot size is not sane
df_validation <- df_validation[Lot_Size <= 1e+08,]
# exclude properties listed for $1,000 dollars
df_validation <- df_validation[log(Price) > min(log(df_train$Price)),]
df_validation[, excess_bath := Bath - Beds ]
df_validation <- df_validation[Zipcode %in% unique(df_train$Zipcode), ]
df_predicted_values <- predict(model_adv, newdata = df_validation)
df_predicted_errors <- log(df_validation$Price) - df_predicted_values
df_predicted_errors <- df_predicted_errors[!is.na(df_predicted_errors)]
sprintf("RMSPE = %f", sqrt(mean(df_predicted_errors^2)))

```

Given the mean root squared prediction error of 0.278895 (relative to the RMSE = 0.310448 produced in-sample) it is concluded that the model generalizes fairly well and performs respectably on out-of-sample data. Therefore the coefficient estimates are valid.

# Omitted Variable Bias

The potentially omitted variables are discussed, followed by a section that assesses their bias.

*Neighborhood* - Local shops, schools, hospitals, venues, etc. The neighborhood convenience is certainly correlated with a house's price. If the neighborhood has high-rating schools, hospitals and convenience stores, it is more possible to attract big families with kids. Correspondingly, single houses are designed with large lot sizes and enough bedrooms and bathrooms in this neighborhood to meet the family requirements. Thus, the variable for neighborhood convenience will bring a positive impact on the coefficient of variables $log (lot size)$ and $excess\_bath$. 

*Remodel year* - In the market, a nearly built house is often sold quickly at a higher price than an old house. Owners tend to remodel their properties to be popular layouts before releasing them to the market. Although remodeling a house would not change the square footage of the building,  the layout could be redesigned to add more luxury features or change the ratio of bedrooms and bathrooms. Thus, the remodel year will lead to an omitted variable bias for intrinsic and luxury features coefficient.  

*Transportation* - Vicinity/accessibility to cities/locations of importance, accessibility to freeways, congestion considerations, public transportation. The convenience of commuting in a location is a factor that impacts the price of a property, and it may increase the influence strength of the zip code, which means an increase of the $Zipcode$ coefficient. 

*Gentrification* - Is the area experiencing influx/gentrification? The arrival of wealthier people in an existing urban district will change the district's character and culture and increase the value of properties. To attract the wealthier people arriving, the developers and owners tend to add luxury features to properties. 

*Socioeconomic* - Median household income. The level of median household income impacts the needs and requirements of buyers for a property's intrinsic and luxury features.  If the median household income is at a high level in an area, the residents can better afford a higher-priced property with more luxury features. 


**Bias Assessment**

|    Variable    | Price | Lot Size | Square Footage | Excess Bath | Luxury Variables | Zip Code | Bias Direction |
|:--------------:|:-----:|:--------:|:--------------:|:-----------:|:----------------:|:--------:|:--------------:|
|  Neighborhood  |   +   |     =    |        =       |      =      |         =        |     +    |   Away from 0  |
|  Remodel_year  |   +   |     =    |        =       |      +      |         +        |     +    |   Away from 0  |
| Transportation |   +   |     =    |        =       |      =      |         =        |     +    |   Away from 0  |
| Gentrification |   +   |     =    |        =       |      =      |         +        |     +    |   Away from 0  |
|  Socioeconomic |   +   |     =    |        +       |      +      |         +        |     +    |   Away from 0  |


# Results

Revisiting the research question, whether U.S.-based real estate properties with specific intrinsic and luxury features command a listing price premium, there is evidence that intrinsic features, especially those related to size/area of property, have a highly significant impact on the list price of a property. The luxury features, while some are statistically significant, did not have meaningful impact of practical significance on listing price. Therefore it cannot be concluded that these "luxury" features have any effect on housing price.